% Решить задачу о восьми ферзях полным перебором.
%

% Запрос:
% решить([], Решение).

% Проверка, что ферзь бьет клетку:
бьет(ферзь(XF, YF), клетка(X, Y)):-
    XF == X; %проверка вертикали, горизонтали.
    YF == Y; 
    DF is XF-YF, DF is X-Y; %проверка диагоналей.
    SF is XF+YF, SF is X+Y.

%Предикат проверяет, бьет ли хоть какой-то ферзь клетку.
битая(Клетка, Ферзи):-
    member(Ферзь, Ферзи),
    бьет(Ферзь, Клетка).

%Добавление ферзя, перебор клеток и добавление к списку походящих
добавить_ферзя(Расстановка, НоваяРасстановка):-
    СтрокиСтолбцы = [1,2,3,4,5,6,7,8],
    member(X, СтрокиСтолбцы),
    member(Y, СтрокиСтолбцы),
    \+ битая(клетка(X, Y), Расстановка),
    НоваяРасстановка = [ферзь(X, Y)|Расстановка].

%Функция расстановки ферзей.
решить(Расстановка, Результат):-
    length(Расстановка, 8), !, Результат = Расстановка.
решить(Расстановка, Результат):-
    добавить_ферзя(Расстановка, НоваяРасстановка),
    решить(НоваяРасстановка, Результат).
